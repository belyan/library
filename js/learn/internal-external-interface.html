<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Внутренний и внешний интерфейс</title>
</head>
<body>

<!--
Внутренний и внешний интерфейс
https://learn.javascript.ru/internal-external-interface
-->
<script>
    "use strict";

    /* Публичное и приватное свойство */
    // Локальные переменные, включая параметры конструктора, можно считать приватными свойствами.
    // Свойства, записанные в this, можно считать публичными.

    /* Публичный и приватный метод */
    // Вложенные функции являются приватными методами

    function CoffeeMachine(power) {
        console.log("Создана кофеварка мощностью: " + power + " ватт");

        // Публичное свойство
        this.waterAmount = 0; // количество воды в кофеварке

        var WATER_HEAT_CAPACITY = 4200;
        var timerId;
        var self = this; // сохранение this в замыкании

        // Приватный метод
        function getBoilTime() {
            return self.waterAmount * WATER_HEAT_CAPACITY * 80 / power;
        }

        // Приватный метод
        function onReady() {
            console.log("Кофе готов!");
        }

        // Публичный метод
        this.run = function () {
            timerId = setTimeout(onReady, getBoilTime());
        };

        this.stop = function () {
           clearTimeout(timerId);
        };
    }

    var coffeeMachine = new CoffeeMachine(20000);
    coffeeMachine.waterAmount = 200;

    console.log(coffeeMachine);
    coffeeMachine.run();
    // coffeeMachine.stop();
</script>

</body>
</html>